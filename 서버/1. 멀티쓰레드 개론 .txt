1. 멀티쓰레드
이해
- 고급 레스토랑/ 로봇 직원/ 영혼

한식집이랑 일식집은 규모가 작아서 로봇을 1대만 고용
패밀리 레스토랑은 규모가 있어 2대를 고용

영혼을 주입을 시켜줘야 로봇을 작동이 가능하다.

식당 관리자가 영혼 하나가 하나의 로봇만 작동이 가능하다.
꼼수를 사용해서 0.01초에 짧은 시간에 움직여 모든 것을 움직이게 하면 그냥 움직이는것 처럼 느껴진다.

pc와 연결시켜 생각하면
식당은 프로그램
로봇은 쓰레드
영혼은 cpu코어 

프로그램에 하나의 쓰레드가 디폴트로 있다 이것을 싱글쓰레드라고 한다.

코어는 하나인데 프로그램은 여러개 이면은 빠르게 왔다갔다 하면서 동작을 한다. 

관리자의 영역은 운영체제가 작동하는 커널모드라고 한다.
커널모드는 윈도우의 핵심적인 로직이 실행

우선순위를 정할 수 있다
그러면 다른것은 실행이 잘안된다 이걸 기아현상이라고 한다.

코어가 빠르게 발전을 하다 한계를 맞이해서 여러 코어를 만들게 되었다.

하지만 많이 쓰레드를 무작정 엄청 늘린다고 하면 부담이 커진다 빙의를 한다는 그 자체가 사실 부담이 있는 작업이다.
그러므로 프로세서가 cpu 코어가 하나의 스레드를 실행시키다가 다른 스레드로 옮겨타는 그 과정이 사실은 굉장히 무겁고 힘든
작업이기 때문에 무작정 직원 수를 늘린다 즉 스레드를 즐린다고 해서 선능이 좋아지라는 보장이 없다.

오히려 하나의 쓰레드마다 하나의 코어가 담당하는 것이 좋다.

모든 쓰레드들은 힙 영역이랑 데이터 영역은 그대로 사용하던 것을 다 공유해서 사용
반면 스택 영역은 다 구분되어서 자신만의 스택 영역을 따로 받습니다.

스택 영역에 접근 하는것은 문제가 없는데 힙영역에 접근하는것에 문제가 된다.
실제로 실행할려 했지만 하다보니 한쪽으로만 몰리는 상황이 발생할 수도 있습니다.

-정리
프로세스를 실행하게 된다면 하나의 쓰레드가 디폴드로 작동이 된다.
하나의 프로세스가 실행이되고 하나의 쓰레드만 있으면 cpu코어가 하나의 쓰레드에 접근을 하여 작동이 된다.

만약
여러 프로세스가 실행이 되고 각각의 쓰레드를 가지고 있으면 cpu코어는 빠르게 여러 쓰레드에 접근을 하여
마치 쓰레드가 자연스럽게 작동이 된것마냥 작동을 한다.

그렇다고 많은 쓰레드를 만들어 작업을 하면 더 좋은게 아니냐고 생각을 할 수 있는데 실제로는 
cpu코어가 쓰레드에 접근을 하는것이 부담이 있는 작업이다.
그리고 중요한 프로세스에 좀더 시간을 투자하는 방법도 있다 이를 커널 모드라고 한다.
하지만 그렇게 된다면 다른 프로세스들이 그만큼 작업을 할 수 없게 되기 때문에 이를 기아 현상이라고 한다.

제일 좋은 방법은
하나의 코어가 하나의 쓰레드만 담당하는것이 좋다.

쓰레드는 공통된 힙 영역을 사용하고 스택 영역은 각자 하나의 쓰레드가 가지고 있다.
heap 영역 - 동적 메모리
stack 영역 - 지역 변수

하나의 프로세스에서 여러 쓰레드가 있으면 공통된 힙영역을 사용하다 보니 경쟁 조건이 생겨서 하나의 일에 몰리는 경우가 생긴다.


































